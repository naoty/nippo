#!/bin/bash

function version() {
  echo "0.1.0"
}

function nippo() {
  local filepath=${NIPPO_PATH:-"${HOME}/nippo"}
  if [ ! -d "${filepath}" ]; then
    mkdir -p "${filepath}"
  fi

  local filename="${filepath}/$(date +%Y-%m-%d).md"
  if [ ! -f "${filename}" ]; then
    touch "${filename}"

    local template_path="${filepath}/NIPPO_TEMPLATE.md"
    if [ -f "${template_path}" ]; then
      cat "${template_path}" > "${filename}"
    fi
  fi

  open "${filename}"
}

for opt in "$@"
do
  case "${opt}" in
    "-v"|"--version")
      echo "$(version)"
      exit 0
  esac
done

nippo
